{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/test/CedarXpress-Frontend/src/component/image/UploadImage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport APIS from \"../../data/urls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FETCH_PRODUCT_API = \"http://localhost:8080/api/v1/products/\";\nconst UPLOAD_IMAGE_API = \"http://localhost:8080/api/v1/admin/products\";\n\nfunction ImageUpload() {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState();\n  const [imageFormData, setImageFormData] = useState();\n\n  const configureJWT = () => localStorage.getItem(\"currentUser\");\n\n  const fetchProducts = () => {\n    axios.get(FETCH_PRODUCT_API).then(response => {\n      const data = response.data;\n      setProducts(data);\n      setSelectedProduct(data[0].productName);\n    });\n  };\n\n  useEffect(() => fetchProducts(), []);\n\n  const handleUploadImage = async () => {\n    const SELECTED_PRODUCT_ID = products.filter(item => item.productName === selectedProduct)[0].id;\n\n    try {\n      console.log(\"Upload Image\", imageFormData);\n      const formData = new FormData();\n      formData.append(\"image\", imageFormData);\n      formData.append(\"destination\", \"images\");\n      formData.append(\"create_thumbnail\", true);\n      const config = {\n        headers: {\n          \"content-type\": \"multipart/form-data\",\n          \"Authorization\": configureJWT()\n        }\n      };\n      const url = UPLOAD_IMAGE_API + \"/\" + SELECTED_PRODUCT_ID;\n      const result = await axios.patch(url, formData, config);\n      console.log(\"REsult: \", result);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: selectedProduct,\n      onChange: e => setSelectedProduct(e.target.value),\n      children: products.map((product, index) => {\n        return /*#__PURE__*/_jsxDEV(\"option\", {\n          children: product.productName\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 16\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"button\",\n      placeholder: \"Upload Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      name: \"image\",\n      onChange: e => setImageFormData(e.target.files[0]),\n      id: \"file\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\",\n      onClick: handleUploadImage,\n      placeholder: \"UploadImage\",\n      disabled: !imageFormData && true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 7\n  }, this);\n}\n\n_s(ImageUpload, \"LrcsaNH88mZdXqXe/TtkIZOTg6M=\");\n\n_c = ImageUpload;\nexport default ImageUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["React","useCallback","useState","useEffect","axios","APIS","FETCH_PRODUCT_API","UPLOAD_IMAGE_API","ImageUpload","products","setProducts","selectedProduct","setSelectedProduct","imageFormData","setImageFormData","configureJWT","localStorage","getItem","fetchProducts","get","then","response","data","productName","handleUploadImage","SELECTED_PRODUCT_ID","filter","item","id","console","log","formData","FormData","append","config","headers","url","result","patch","error","e","target","value","map","product","index","files"],"sources":["/Users/apple/Desktop/test/CedarXpress-Frontend/src/component/image/UploadImage.js"],"sourcesContent":["import React, { useCallback, useState, useEffect} from \"react\";\nimport axios from \"axios\";\nimport APIS from \"../../data/urls\";\n\nconst FETCH_PRODUCT_API = \"http://localhost:8080/api/v1/products/\";\nconst UPLOAD_IMAGE_API = \"http://localhost:8080/api/v1/admin/products\";\n\nfunction ImageUpload(){\n    const[products, setProducts] = useState([]);\n    const[selectedProduct, setSelectedProduct] = useState();\n    const[imageFormData, setImageFormData] = useState();\n    const configureJWT = () =>  localStorage.getItem(\"currentUser\");    \n\n\n     const fetchProducts =  () => {\n        axios.get(FETCH_PRODUCT_API).then(response => {\n          const data = response.data;\n          setProducts(data);\n          setSelectedProduct(data[0].productName);\n        });\n    }\n\n    useEffect(()=> fetchProducts(), []);\n\n    const handleUploadImage = async () => {\n      const SELECTED_PRODUCT_ID = products.filter(item => item.productName === selectedProduct)[0].id;\n    \n        try {\n          console.log(\"Upload Image\", imageFormData);\n          const formData = new FormData();\n          formData.append(\"image\", imageFormData);\n          formData.append(\"destination\", \"images\");\n          formData.append(\"create_thumbnail\", true);\n\n          const config = {\n            headers: {\n              \"content-type\": \"multipart/form-data\",\n              \"Authorization\" : configureJWT()\n            }\n          };\n\n          const url = UPLOAD_IMAGE_API + \"/\" + SELECTED_PRODUCT_ID \n          const result = await axios.patch(url, formData, config);\n          console.log(\"REsult: \", result);\n        } catch (error) {\n          console.error(error);\n        }\n      };\n\n    return (\n      <div>\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n         <select value={selectedProduct} onChange={(e)=>setSelectedProduct(e.target.value)}>\n          {products.map((product, index) => {\n        return <option key = {index} >{product.productName}</option>\n        })}\n        </select>\n        <input type=\"button\" placeholder =\"Upload Image\" />\n        <input type=\"file\"  accept=\"image/*\" name=\"image\" onChange={(e)=> setImageFormData(e.target.files[0])} id=\"file\"  />\n        <input type=\"submit\" onClick={handleUploadImage} placeholder=\"UploadImage\" disabled={!imageFormData && true} />\n      </div>\n       \n    )\n}\n\n  export default ImageUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module"}